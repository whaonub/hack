var app=new Vue({el:"#signLogin",data:function(){return{current:"",changeMode:!0,calculator:!1,weather:!1,myModel:!1,weatherItems:[],selectData:"",selectedVal:""}},created:function(){this.obtainWeather()},methods:{press:function(event){var me=this,key=event.target.textContent;if("="!=key&&"C"!=key&&"*"!=key&&"/"!=key&&"√"!=key&&"x 2"!=key&&"%"!=key&&"←"!=key&&"±"!=key&&"sin"!=key&&"cos"!=key&&"tan"!=key&&"log"!=key&&"ln"!=key&&"x^"!=key&&"x !"!=key&&"π"!=key&&"e"!=key&&"rad"!=key&&"°"!=key)me.current+=key;else if("="===key)if(-1<me.current.indexOf("^")){var base=me.current.slice(0,me.current.indexOf("^")),exponent=me.current.slice(me.current.indexOf("^")+1);me.current=eval("Math.pow("+base+","+exponent+")")}else me.current=eval(me.current);else if("C"===key)me.current="";else if("*"===key)me.current+="*";else if("/"===key)me.current+="/";else if("+"===key)me.current+="+";else if("-"===key)me.current+="-";else if("±"===key)"-"===me.current.charAt(0)?me.current=me.current.slice(1):me.current="-"+me.current;else if("←"===key)me.current=me.current.substring(0,me.current.length-1);else if("%"===key)me.current=me.current/100;else if("π"===key)me.current=me.current*Math.PI;else if("x 2"===key)me.current=eval(me.current*me.current);else if("√"===key)me.current=Math.sqrt(me.current);else if("sin"===key)me.current=Math.sin(me.current);else if("cos"===key)me.current=Math.cos(me.current);else if("tan"===key)me.current=Math.tan(me.current);else if("log"===key)me.current=Math.log10(me.current);else if("ln"===key)me.current=Math.log(me.current);else if("x^"===key)me.current+="^";else if("x !"===key){var number=1;if(0===me.current)me.current="1";else if(me.current<0)me.current=NaN;else{for(var number=1,i=me.current;0<i;i--)number*=i;me.current=number}}else"e"===key?me.current=Math.exp(me.current):"rad"===key?me.current=me.current*(Math.PI/180):"°"===key&&(me.current=me.current*(180/Math.PI))},changeModeEvent:function(){this.changeMode=!this.changeMode},changeCalculator:function(){this.calculator=!0},changeMyModel:function(e){var t=this;"shouxian"!=e.target.parentElement.className&&"shouxian"!=e.target.className||$.ajax({url:"../app/js/selectJson.json",success:function(e){t.selectData=e.data,t.selectedVal=t.selectData[0].value}}),t.myModel=!0},changeWeather:function(){this.weather=!0},close:function(){this.current="",this.calculator=!1},closeMyModel:function(){this.myModel=!1,this.selectData=""},getSelected:function(e){this.selectedVal=e.target.value},handelSure:function(){$.ajax({url:"",data:this.selectedVal,type:"post",success:function(){console.log(1)}})},closeWeather:function(){this.weather=!1},obtainWeather:function(){var t,r=this;new BMap.Map("map");(new BMap.LocalCity).get(function n(e){t=e.name.replace("市","")}),setInterval(function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,n=e.getDate(),c=e.getHours(),a=e.getMinutes();a=function u(e){e<10&&(e="0"+e);return e}(a),$("span#time1").text(t+"-"+r+"-"+n),$("span#time2").text(c+":"+a)},300),setTimeout(function(){var e="https://sapi.k780.com/?app=weather.future&appkey=10003&sign=b59bc3ef6191eb9f747dd4e83c99f2a4&format=json&jsoncallback=getWeather_week&weaid="+encodeURI(t);$.ajax({type:"GET",cache:!1,url:e,dataType:"jsonp",jsonpCallback:"getWeather_week",success:function(e){var t=e.result;r.weatherItems=t}})},1e3)}}});